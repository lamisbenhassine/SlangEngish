<div class="user-management">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>User Management</h1>
      <p class="header-subtitle">Manage all users, their roles, and permissions</p>
    </div>
    <div class="header-actions">
      <button mat-raised-button class="action-btn primary" (click)="addUser()">
        <mat-icon>person_add</mat-icon>
        <span>Add User</span>
      </button>
    </div>
  </div>

  <!-- Filters Section -->
  <div class="filters-section">
    <div class="search-container">
      <mat-icon class="search-icon">search</mat-icon>
      <input 
        type="text" 
        placeholder="Search users by name or email..." 
        class="search-input"
        [(ngModel)]="searchTerm"
        (input)="onSearch()">
    </div>
    
    <div class="filter-controls">
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Role</mat-label>
        <mat-select [(ngModel)]="selectedRole" (selectionChange)="onRoleChange()">
          <mat-option value="all">All Roles</mat-option>
          <mat-option value="ADMIN">Admin</mat-option>
          <mat-option value="TUTOR">Tutor</mat-option>
          <mat-option value="STUDENT">Student</mat-option>
          <mat-option value="CLUB_MANAGER">Club manager</mat-option>
          <mat-option value="EMPLOYEE">Employee</mat-option>
        </mat-select>
      </mat-form-field>
      
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="selectedStatus" (selectionChange)="onStatusChange()">
          <mat-option value="all">All Status</mat-option>
          <mat-option value="active">Active</mat-option>
          <mat-option value="inactive">Inactive</mat-option>
          <mat-option value="pending">Pending</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <!-- Users Table -->
  <div class="users-table-container">
    <div class="table-header">
      <span class="results-count">Showing {{ filteredUsers.length }} of {{ users.length }} users</span>
    </div>
    
    <div class="users-table">
      <div class="table-head">
        <div class="th user-col">User</div>
        <div class="th email-col">Email</div>
        <div class="th role-col">Role</div>
        <div class="th status-col">Status</div>
        <div class="th date-col">Join Date</div>
        <div class="th active-col">Last Active</div>
        <div class="th actions-col">Actions</div>
      </div>
      
      <div class="table-body">
        <div class="table-row" *ngFor="let user of filteredUsers">
          <div class="td user-col">
            <div class="user-info">
              <img [src]="user.avatar" [alt]="user.firstName" class="user-avatar">
              <div class="user-name">
                <span class="name">{{ user.firstName }} {{ user.lastName }}</span>
                <span class="user-id">#{{ user.id }}</span>
              </div>
            </div>
          </div>
          <div class="td email-col">{{ user.email }}</div>
          <div class="td role-col">
            <span [class]="getRoleClass(user.role)">{{ user.role }}</span>
          </div>
          <div class="td status-col">
            <span [class]="getStatusClass(user.status)">{{ user.status ?? 'active' }}</span>
          </div>
          <div class="td date-col">{{ user.joinDate }}</div>
          <div class="td active-col">{{ user.lastActive }}</div>
          <div class="td actions-col">
            <button mat-icon-button class="action-icon view" (click)="viewUser(user)" matTooltip="View Details">
              <mat-icon>visibility</mat-icon>
            </button>
            <button mat-icon-button class="action-icon edit" (click)="editUser(user)" matTooltip="Edit User">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button class="action-icon delete" (click)="deleteUser(user)" matTooltip="Delete User">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Empty State -->
    <div class="empty-state" *ngIf="filteredUsers.length === 0">
      <mat-icon>search_off</mat-icon>
      <h3>No users found</h3>
      <p>Try adjusting your search or filter criteria</p>
    </div>
  </div>
</div>
